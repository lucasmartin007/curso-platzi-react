__

**src/pages/Home.js

...

**App

import { Router } from "@reach/router";

..
Router
Home path = "/"
Home path = "/pet/:id"

>>npm install @reach/router

**ListOfCategories

..
Category { ...category } path = { `/pet/${ category.id }` }

**package.json

..
"dev":"webpack-dev-server --history-api-fallback"

**webpack.config.js

..
publicPath: "/"

__27

**Home

..
categoryId

**Category/styles.js

..
import { Link as LinkRouter } from "@reach/router";

..
export const Link = styled(LinkRouter)`...`;

**Category

..
export const Category = ({ cover = DEFAULT_IMAGE, path = "#", emoji = "?" }) => return(
Link to = { path }
...
)

**Logo

import { Link } from "@reach/router";

export const Logo = props => {
return(
Link to = "/"
...
);
}

__28

**App

..
Detail path = "/detail/:detailId"

**pages/Detail

export const Detail = () => {
return(
PhotoCardWithQuery id = { detailId }
)
}

*PhotoCard

..
Link to = { `/detail/${ id }` }

__29

**components/NavBar

import { MdHome, MdFavouriteBorder, MdPersonOutline } from "react-icons/md";

const SIZE = "32px";

export const NavBar = () => {
return (
Nav
Link to = "/" MdHome size = { SIZE }
Link to = "/favs" MdFavouriteBorder size = { SIZE }
Link to = "/user" MdPersonOutline size = { SIZE }
)
}

**App

..
NavBar

**NavBar/styles.js

export const Nav = styled.nav`
...
`;

export const Link = styled(LinkRouter)`
...
`;

__30

**NavBar/styles.js

..
import { fadeIn } from "../../styles/animation";

..
Link
..
&[aria-current]{
color:#000;
&:after{
${fadeIn({ time: "0.5s" })};
content:"Â·";
position:absolute;
bottom:0;
font-size:34px;
line-height:20px;
}
}

__31

**pages/Favs.js

export const Favs = () => {
return(
h1 Favs
)
}

**pages/User.js

export const User = () => {
return(
h1 User
)
}

**pages/NotRegisteredUser.js

export const NotRegisteredUser = () => {
return(
h1 NotRegisteredUser
)
}

**App

..
const UserLogged = ({ children }) => {
return children({ isAuth:false })
}

..
UserLogged
{
({ isAuth }) => isAuth ? (
Router
Favs path = "/favs"
User path = "/user"
) : (
Router
NotRegisteredUser path = "/favs"
NotRegisteredUser path = "/user"
)
}

__32

**src/Context.js

const Context = createContext();

const Provider = ({ children }) => {
const [isAuth, setIsAuth] = useState(false);
const value = {
isAuth,
activateAuth:() => {
setIsAuth(true)
}
}

return(
Context.Provider value = { value }
{ children }
)

}

export default {
Context,
Consumer: Context.Consumer
}

**index.js

..
import Context from "./src/Context";

..
Context.Provider

**App

..
Context.Consumer
...

**NotRegisteredUser

Context.Consumer
{
({ isAuth, activateAuth }) => {
return (
form onSubmit = { activateAuth }
button Iniciar sesion
)
}
}

__33

**components/UserForm

const useInputValue = initialValue => {
const [value, setValue] = useState(initialValue);
const onChange = e => setValue(e.target.value);

return {value, onChange}
}

export const UserForm = ({ onSubmit }) => {
const email = useInputValue("");
const password = useInputValue("");
return(
input placeholder = "Email" { ...email }
input type = "password" placeholder = "Password" { ...password }
button Iniciar sesion
)
}

**NotRegisteredUser

..
return(
<UserForm onSubmit = { activateAuth } />
)

**hooks/useInputValue

...

__34

**UserForm/styles

import styled from "styled-components";

export const Form = styled.form`
padding:16px 0;
`;

export const Input = styled.input`
border:1px solid #ccd;
border-radius:3px;
margin-bottom:8px;
padding:8px 4px;
display:block;
width:100%;
`;

export const Button = styled.button`
background:#8d00ff;
border-radius:3px;
color:#fff;
height:32px;
display:block;
width:100%;
text-align:center;
`;

export const Title = styled.h2`
font-size:16px;
font-weight:500;
padding:8px 0;
`;

**UserForm

Fragment
h2 { title }
Form
..
Input
..
Button { title }

**NotRegisteredUser

..
UserForm title = "Registrarse"
UserForm title = "Iniciar sesion"

__35

**container/RegisterMutation.js

import { Mutation } from "react-apollo";

import { gql } from "apollo-boost";

const REGISTER = gql`
mutation signup($input: UserCredentials!){
signup(input: $input)
}
`;

export const RegisterMutation = ({ children }) => {
return(
Mutation mutation = { REGISTER }
{ children }
)
}

**NotRegisteredUser

..
RegisterMutation
{
(register) => {
const onSubmit = ({ email, password }) => {
const input = { email, password }
const variables = { input }
register({ variables }).then(activateAuth)
}
return UserForm title = "Registrarse"
}
}

**UserForm

..
const handleSubmit = (event) => {
event.preventDefault();
onSubmit({ email: email.value, password: password.value });
}

..
Form onSubmit = { handleSubmit }
